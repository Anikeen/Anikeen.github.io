webpackJsonp([1],{Bz6G:function(e,t){},FNRo:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("7+uW"),r=s("Dd8w"),i=s.n(r),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"users-table__header"},[t("div",{staticClass:"users-table__row"},[t("div",{staticClass:"users-table__cell",on:{click:this.sortByName}},[this._v("Имя")]),this._v(" "),t("div",{staticClass:"users-table__cell",on:{click:this.sortByPhone}},[this._v("Телефон")])])])},staticRenderFns:[]};var o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"users-table__row"},[s("div",{staticClass:"users-table__cell",class:e.isSubcell},[e.hasSubordinates||e.hasChief?s("button",{staticClass:"users-table__button"},[e._v("\n      +\n    ")]):e._e(),e._v("\n    "+e._s(e.user.name)+"\n  ")]),e._v(" "),s("div",{staticClass:"users-table__cell"},[e._v(e._s(e.user.phone))])])},staticRenderFns:[]};var u={name:"Users",components:{UsersTableHeader:s("VU/8")({name:"UsersTableHeader",methods:{sortByName:function(){this.$parent.sortByName()},sortByPhone:function(){this.$parent.sortByPhone()}}},a,!1,function(e){s("ODkp")},null,null).exports,UserRow:s("VU/8")({name:"UserRow",props:["user"],computed:{hasSubordinates:function(){return this.user.subordinates.length>0},hasChief:function(){return!!this.user.chiefId},isSubcell:function(){return this.user.chiefId?"subcell":""}}},o,!1,function(e){s("tCz4")},null,null).exports},props:["users"],methods:{sortByName:function(){this.users.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})},sortByPhone:function(){this.users.sort(function(e,t){return e.phone<t.phone?-1:e.phone>t.phone?1:0})}}},l={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"users-table"},[s("UsersTableHeader"),e._v(" "),s("div",{staticClass:"users-table__body"},[e._l(e.users,function(t){return[s("UserRow",{key:t.id,attrs:{user:t}}),e._v(" "),t.subordinates.length>0?e._l(t.subordinates,function(e){return s("UserRow",{key:e.id,attrs:{user:e}})}):e._e()]})],2)],1)},staticRenderFns:[]};var c=s("VU/8")(u,l,!1,function(e){s("qZk8")},null,null).exports,d=s("NYxO"),f={name:"AddingWidget",data:function(){return{users:[],name:null,phone:null,chiefId:null}},methods:i()({},Object(d.d)(["addUser"]),Object(d.b)(["storeUsers"]),{widgetToggle:function(){this.$parent.widgetToggle()},submitHandler:function(){if(this.name&&this.phone){var e={id:(new Date).valueOf().toString().slice(11),name:this.name,phone:this.phone,chiefId:this.chiefId,subordinates:[]};this.addUser(e),this.storeUsers(),this.name=null,this.phone=null,this.chief=null}}}),mounted:function(){this.users=this.$store.getters.users}},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"adding-widget"},[s("div",{staticClass:"adding-widget__header"},[s("h2",{staticClass:"adding-widget__title"},[e._v("Добавление пользователя")]),e._v(" "),s("button",{staticClass:"adding-widget__btn",attrs:{type:"button"},on:{click:e.widgetToggle}},[e._v("\n      ×\n    ")])]),e._v(" "),s("form",{staticClass:"adding-form",on:{submit:function(t){return t.preventDefault(),e.submitHandler(t)}}},[s("div",{staticClass:"adding-form__row"},[s("label",{staticClass:"adding-form__label",attrs:{for:"name"}},[e._v("Имя")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"adding-form__input",attrs:{id:"name",type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"adding-form__row"},[s("label",{staticClass:"adding-form__label",attrs:{for:"phone"}},[e._v("Телефон")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"adding-form__input",attrs:{id:"phone",type:"text"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e._v(" "),s("div",{staticClass:"adding-form__row"},[s("label",{staticClass:"adding-form__label",attrs:{for:"chief"}},[e._v("Начальник")]),e._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:e.chiefId,expression:"chiefId"}],staticClass:"adding-form__select",attrs:{id:"chief"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.chiefId=t.target.multiple?s:s[0]}}},[s("option",{attrs:{value:""}}),e._v(" "),e._l(e.users,function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v("\n          "+e._s(t.name)+"\n        ")])})],2)]),e._v(" "),s("button",{staticClass:"just-btn",attrs:{type:"submit"}},[e._v("Сохранить")])])])},staticRenderFns:[]};var h={name:"Contacts",components:{Users:c,AddingWidget:s("VU/8")(f,_,!1,function(e){s("rx+c")},null,null).exports},data:function(){return{WidgetIsOpen:!1}},computed:Object(d.c)(["users"]),methods:i()({},Object(d.b)(["fetchUsers"]),{widgetToggle:function(){this.WidgetIsOpen=!this.WidgetIsOpen}}),mounted:function(){this.fetchUsers()}},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"contacts"},[s("div",{staticClass:"users-list"},[s("button",{staticClass:"just-btn",on:{click:e.widgetToggle}},[e._v("\n      Добавить\n    ")]),e._v(" "),e.users.length>0?s("Users",{attrs:{users:e.users}}):s("p",{staticClass:"warning"},[e._v("\n      Нет добавленных пользователей\n    ")])],1),e._v(" "),e.WidgetIsOpen?s("AddingWidget"):e._e()],1)},staticRenderFns:[]};var m={name:"App",components:{Contacts:s("VU/8")(h,p,!1,function(e){s("Bz6G")},null,null).exports}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("Contacts")],1)},staticRenderFns:[]};var g=s("VU/8")(m,v,!1,function(e){s("FNRo")},null,null).exports,b=s("mvHQ"),C=s.n(b),w={state:{users:[]},getters:{users:function(e){return e.users}},actions:{fetchUsers:function(e){var t=window.localStorage.getItem("users"),s=[];t&&(s=JSON.parse(t)),e.commit("updateUsers",s)},storeUsers:function(e){var t=e.getters,s=C()(t.users);window.localStorage.setItem("users",s)}},mutations:{updateUsers:function(e,t){e.users=t},addUser:function(e,t){if(t.chiefId){var s=e.users.findIndex(function(e){return e.id==t.chiefId});e.users[s].subordinates.push(t)}else e.users.push(t)}}};n.a.use(d.a);var U=new d.a.Store({modules:{users:w}});n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:g},template:"<App/>",store:U})},ODkp:function(e,t){},qZk8:function(e,t){},"rx+c":function(e,t){},tCz4:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6c73ec9686a83f77cdeb.js.map